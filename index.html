<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>School Factory</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      height: 100vh;
      background: linear-gradient(135deg, #ffafbd, #ffc3a0);
      overflow: hidden;
    }

    #game-container {
      padding: 20px;
      background-color: #ffffff;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      width: 95%;
      max-width: 1200px;
      box-sizing: border-box;
      display: flex;
      justify-content: space-between;
      gap: 20px;
      height: 100%;
      overflow-y: auto;
    }

    h1 {
      color: #4CAF50;
      font-size: 32px;
      margin-bottom: 10px;
    }

    .column {
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .upgrades-column {
      background: linear-gradient(135deg, #ff9a9e, #fad0c4);
      flex: 1;
    }

    .tasks-column {
      background: linear-gradient(135deg, #a1c4fd, #c2e9fb);
      flex: 2;
    }

    .button-container {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      justify-content: center;
      width: 100%;
    }

    .upgrade-button, .task-button {
      color: white;
      border: none;
      padding: 10px 20px;
      cursor: pointer;
      font-size: 16px;
      border-radius: 5px;
      transition: background-color 0.3s, transform 0.1s;
      width: 180px;
      margin: 10px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .upgrade-button {
      background-color: #4CAF50;
    }

    .task-button {
      background-color: #f39c12;
    }

    .task-button:disabled, .upgrade-button:disabled {
      background-color: #ddd;
      cursor: not-allowed;
    }

    .task-button.pending {
      background-color: #e67e22;
    }

    .task-button.active {
      background-color: #2ecc71;
    }

    .task-button.locked {
      background-color: #7f8c8d;
      cursor: not-allowed;
    }

    .tooltip {
      position: relative;
      display: inline-block;
      cursor: pointer;
    }

    .tooltip .tooltiptext {
      visibility: hidden;
      width: 220px;
      background-color: #6c757d;
      color: #fff;
      text-align: center;
      border-radius: 5px;
      padding: 5px 0;
      position: absolute;
      z-index: 1;
      bottom: 125%;
      left: 50%;
      margin-left: -110px;
      opacity: 0;
      transition: opacity 0.3s;
    }

    .tooltip:hover .tooltiptext {
      visibility: visible;
      opacity: 1;
    }

    .stats {
      margin-top: 10px;
    }

    .settings-button {
      background-color: #007bff;
      color: white;
      padding: 10px;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 20px;
    }
  </style>
</head>
<body>

  <div id="game-container">
    <!-- Upgrades Section -->
    <div class="column upgrades-column">
      <h2>Upgrades</h2>
      <div class="button-container">
        <div class="tooltip">
          <button id="upgrade-classroom" class="upgrade-button" disabled>Upgrade Classroom: 10 KP</button>
          <span class="tooltiptext">Increases your KP per second!</span>
        </div>
        <div class="tooltip">
          <button id="upgrade-library" class="upgrade-button" disabled>Upgrade Library: 50 KP</button>
          <span class="tooltiptext">Boosts KP generation rate!</span>
        </div>
        <div class="tooltip">
          <button id="upgrade-computer" class="upgrade-button" disabled>Upgrade Computer Lab: 100 KP</button>
          <span class="tooltiptext">Further enhances KP generation!</span>
        </div>
      </div>
    </div>

    <!-- Tasks Section (Twice as wide) -->
    <div class="column tasks-column">
      <h2>Tasks</h2>
      <div class="button-container">
        <div class="tooltip">
          <button id="task-study" class="task-button">Study - CD: 0s</button>
          <span class="tooltiptext">Earn KP by studying!</span>
        </div>
        <div class="tooltip">
          <button id="task-research" class="task-button locked">Research - CD: 0s</button>
          <span class="tooltiptext">Requirement: 100 KP. Research to unlock more tasks!</span>
        </div>
        <div class="tooltip">
          <button id="task-laboratory" class="task-button locked">Lab Work - CD: 0s</button>
          <span class="tooltiptext">Requirement: 250 KP. Lab tasks give big rewards!</span>
        </div>
        <div class="tooltip">
          <button id="task-programming" class="task-button locked">Programming - CD: 0s</button>
          <span class="tooltiptext">Requirement: 500 KP. Solve programming challenges!</span>
        </div>
      </div>
    </div>

    <!-- Stats Section -->
    <div class="column">
      <h2>Stats</h2>
      <div class="stats">
        <p>Total KP: <span id="total-kp">0</span></p>
        <p>Total KP Earned: <span id="total-earned-kp">0</span></p>
        <p>KP Per Second: <span id="kp-per-second">1</span></p>
      </div>
      <button class="settings-button" onclick="showHelp()">Help</button>
    </div>
  </div>

  <!-- Help Modal -->
  <div id="help-modal" style="display: none;">
    <h2>Help & Information</h2>
    <p>Welcome to School Factory! In this game, you generate Knowledge Points (KP) and use them to upgrade your school.</p>
    <ul>
      <li><strong>Upgrade Classroom</strong>: Cost: 10 KP, increases KP per second.</li>
      <li><strong>Upgrade Library</strong>: Cost: 50 KP, increases KP generation rate.</li>
      <li><strong>Tasks</strong>: Complete tasks to earn KP over time. Requirements vary for each task.</li>
    </ul>
    <button onclick="closeHelp()">Close</button>
  </div>

  <script>
    let knowledgePoints = 0;
    let totalKP = 0;
    let totalEarnedKP = 0;
    let passiveKpPerSecond = 1;
    let taskCooldowns = {
      study: 0,
      research: 0,
      laboratory: 0,
      programming: 0
    };

    const kpElement = document.getElementById("total-kp");
    const totalEarnedKpElement = document.getElementById("total-earned-kp");
    const kpPerSecondElement = document.getElementById("kp-per-second");

    const taskButtons = {
      study: document.getElementById("task-study"),
      research: document.getElementById("task-research"),
      laboratory: document.getElementById("task-laboratory"),
      programming: document.getElementById("task-programming")
    };

    const taskRequirements = {
      research: 100,
      laboratory: 250,
      programming: 500
    };

    const unlockedTasks = {
      research: false,
      laboratory: false,
      programming: false
    };

    function updateGame() {
      kpElement.textContent = knowledgePoints;
      totalEarnedKpElement.textContent = totalEarnedKP;
      kpPerSecondElement.textContent = passiveKpPerSecond;

      updateButtons();
    }

    function updateButtons() {
      // Upgrades
      document.getElementById("upgrade-classroom").disabled = knowledgePoints < 10;
      document.getElementById("upgrade-library").disabled = knowledgePoints < 50;
      document.getElementById("upgrade-computer").disabled = knowledgePoints < 100;

      // Tasks
      for (const task in taskButtons) {
        const button = taskButtons[task];
        const taskRequirement = taskRequirements[task] || 0;
        const cooldown = taskCooldowns[task];
        button.disabled = knowledgePoints < taskRequirement || cooldown > 0;

        // Update text for cooldown display
        button.textContent = `${button.textContent.split(' - ')[0]} - CD: ${cooldown}s`;

        // Set button state (locked, pending, completed)
        if (!unlockedTasks[task] && knowledgePoints >= taskRequirement) {
          unlockedTasks[task] = true;
          button.classList.remove("locked");
          button.classList.add("pending");
        }

        if (unlockedTasks[task]) {
          if (cooldown > 0) {
            button.classList.add("pending");
            button.classList.remove("locked", "active");
          } else {
            button.classList.remove("pending", "active");
          }
        }

        if (knowledgePoints < taskRequirement) {
          button.classList.add("locked");
          button.classList.remove("pending", "active");
        }
      }
    }

    function upgradeClassroom() {
      if (knowledgePoints >= 10) {
        knowledgePoints -= 10;
        passiveKpPerSecond++;
        updateGame();
      }
    }

    function upgradeLibrary() {
      if (knowledgePoints >= 50) {
        knowledgePoints -= 50;
        passiveKpPerSecond += 2;
        updateGame();
      }
    }

    function upgradeComputer() {
      if (knowledgePoints >= 100) {
        knowledgePoints -= 100;
        passiveKpPerSecond += 5;
        updateGame();
      }
    }

    function startTask(task) {
      if (taskCooldowns[task] === 0 && unlockedTasks[task]) {
        taskCooldowns[task] = 10;  // Set cooldown time to 10 seconds
        taskButtons[task].classList.add("active");

        // Simulate task completion
        const cooldownInterval = setInterval(() => {
          taskCooldowns[task]--;
          if (taskCooldowns[task] === 0) {
            clearInterval(cooldownInterval);
            taskButtons[task].classList.remove("active");
            knowledgePoints += 50; // Simulate earning 50 KP per task
            totalEarnedKP += 50;
            updateGame();
          }
          updateButtons();
        }, 1000);
      }
    }

    function showHelp() {
      document.getElementById("help-modal").style.display = "block";
    }

    function closeHelp() {
      document.getElementById("help-modal").style.display = "none";
    }

    document.getElementById("upgrade-classroom").onclick = upgradeClassroom;
    document.getElementById("upgrade-library").onclick = upgradeLibrary;
    document.getElementById("upgrade-computer").onclick = upgradeComputer;

    document.getElementById("task-study").onclick = () => startTask('study');
    document.getElementById("task-research").onclick = () => startTask('research');
    document.getElementById("task-laboratory").onclick = () => startTask('laboratory');
    document.getElementById("task-programming").onclick = () => startTask('programming');

    // Initialize game
    setInterval(() => {
      knowledgePoints += passiveKpPerSecond; // Add passive KP every second
      totalEarnedKP += passiveKpPerSecond; // Add to total earned KP
      updateGame();
    }, 1000);
  </script>
</body>
</html>
